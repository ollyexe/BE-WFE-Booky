<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
    <!--VueJs-->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!--Css-->
    <link rel="stylesheet" href="singlePagestyle.css">
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0" >

    <title>Registrazione</title>
</head>
<body>


<div id="app">

    <div  class="box" style="height: 625px !important;"><!--ruolo <0 perchè succesivamente stabilisce se è ruolo 0 1 o 2-->
        <div class="container">
            <div class="top-header">
                <header>Register</header>
            </div>


            <div class="input-field">
                <label for="nome">Nome</label>
                <input type="text" class="input"  id="nome" name="nome"
                placeholder="Nome" >
            </div>

            <div class="input-field">
                <label for="cognome">Cognome</label>
                <input type="text" class="input"  id="cognome" name="cognome"
                placeholder="Cognome" >
            </div>

            <div class="input-field">
                <label for="mail">Email</label>
                <input type="text" class="input"  id="mail" name="username_utente"
                       placeholder="Email" required autofocus >
            </div>

            <div class="input-field">
                <label for="pass">Password</label>
                <input  class="input"   id="pass" name="password-utente"
                       placeholder="Password" >
            </div>


            <div>
                <button id="registra" class="signUp_button2" name="signUp_button" value="SignUp">Registrati</button>
            </div>
            <div >
                <a  class="text-danger" id="reg_l"  style="text-align: center;text-decoration: none" ></a>
            </div>


            <div>
                <a class="signUp_text text-decoration-none text-black" role="article">Sei gia un nostro utente?</a>
                <a href="../index.html" class="login_guest">Accedi</a>
            </div>

        </div>
    </div>
    <!-- Fine Sezione Login -->
</div>
<script>
    window.onload = function () {
        var reg_labl = ''
        document.getElementById('reg_l').innerHTML=reg_labl
        $('#registra').click(function(){
            $.get("../apiUtente",{path: "registration", mail: $("#mail").val(), pass: $("#pass").val(),nome:$("#nome").val(),cognome:$("#cognome").val()},
                function (data) {
                    console.log(data)
                    if(data['registration_state']==='succesful'){

                        window.location.href = '../index.html'
                    }
                    else {
                        document.getElementById('reg_l').innerHTML="Controllare I dati"
                    }
                }
            )
        })

        $("#mail").on("input", function() {
            document.getElementById('reg_l').innerHTML=""

        });
        $("#pass").on("input", function() {
            document.getElementById('reg_l').innerHTML=""

        });
        $("#nome").on("input", function() {
            document.getElementById('reg_l').innerHTML=""

        });
        $("#cognome").on("input", function() {
            document.getElementById('reg_l').innerHTML=""

        });
    }





</script>
</body>
</html>